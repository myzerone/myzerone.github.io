<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>iOS AssetsLibrary框架的使用 – myzerone</title> <meta name="description" content="记录下自己学习的过程、点滴，也为了分享自己的收获。"> <meta name="keywords" content="iOS, AssetsLibrary, 图片, 视频"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="/assets/img/logo.png"> <meta name="twitter:title" content="iOS AssetsLibrary框架的使用"> <meta name="twitter:description" content="AssetsLibrary框架的简单使用介绍，主要类的使用方式，实现图片／视频资源的访问"> <!-- Open Graph --> <meta property="og:locale" content="zh_CN"> <meta property="og:type" content="article"> <meta property="og:title" content="iOS AssetsLibrary框架的使用"> <meta property="og:description" content="AssetsLibrary框架的简单使用介绍，主要类的使用方式，实现图片／视频资源的访问"> <meta property="og:url" content="/posts/2014/03/25/iOS-AssetsLibrary%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"> <meta property="og:site_name" content="myzerone"> <meta property="og:image" content="/assets/img/logo.png"> <!-- Webmaster Tools verfication --> <meta name="google-site-verification" content="Oq-I-tGK8y1zoHLnZQnfe7rH6rkjqyjqZfBtvADe2uU"> <link rel="canonical" href="/posts/2014/03/25/iOS-AssetsLibrary%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="myzerone Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- JS --> <script src="/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link rel="shortcut icon" href="/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <!-- 首页 --> <li> <a href="/">首页</a> </li> <!-- 关于 --> <li> <a href="#">关于</a> <ul class="dl-submenu"> <li> <img src="/assets/img/logo.png" alt="myzerone photo" class="author-photo"> <h4>myzerone</h4> <p>记录下自己学习的过程、点滴，也为了分享自己的收获。</p> </li> <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:myzerone@myzerone.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://github.com/myzerone" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul>
<!-- /.dl-submenu --> </li> <!-- 博客 --> <li> <a href="#">博客</a> <ul class="dl-submenu"> <li><a href="/posts/">博客</a></li> <li><a href="/tags/">标签</a></li> </ul> </li> <!-- 随笔 --> <li> <a href="/notes/" rel="noopener noreferrer">随笔</a> </li> <!-- 项目 --> <li> <a href="/projects/" rel="noopener noreferrer">项目</a> </li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>iOS AssetsLibrary框架的使用</h1> <h4>25 Mar 2014</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~3 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="id-ios-assetslibrary">iOS AssetsLibrary框架的使用</h1> <p><code class="highlighter-rouge">AssetsLibrary</code>框架提供了访问“照片”应用程序下的图片和视频。你可以使用该框架检索资源列表，也可以保存照片或视频到照片相册下。该框架的层次结构为:</p> <p>ALAssetsLibrary–&gt;ALAssetsGroup–&gt;ALAsset–&gt;ALAssetRepresentation</p> <h2 id="id-alassetslibrary">ALAssetsLibrary</h2> <p>ALAssetsLibrary代表系统中的整个资源库，可以读取所有的相册数据，即ALAssetsGroup列表。使用ALAssetsLibrary可以访问资源库中的照片和视频，也可以保存照片和视频。</p> <h3 id="id-authorizationstatus">authorizationStatus</h3> <p>获取访问照片列表的授权状态，用于判断当前应用是否可以访问资源库，是一个类方法。支持IOS6.0及以后的系统。其返回值类型有：</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">ALAuthorizationStatus</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ALAuthorizationStatusNotDetermined</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// 用户还没有做出选择这个应用程序的问候
</span>    <span class="n">ALAuthorizationStatusRestricted</span><span class="p">,</span>        <span class="c1">// 这个应用程序没有被授权访问照片数据。当前用户不能改变应用程序的状态，是受限制的。如家长控制权限
</span>    <span class="n">ALAuthorizationStatusDenied</span><span class="p">,</span>            <span class="c1">// 用户已拒绝该应用程序访问照片数据
</span>    <span class="n">ALAuthorizationStatusAuthorized</span>         <span class="c1">// 用户已授权该应用可以访问照片数据
</span><span class="p">}</span>
<span class="kt">int</span> <span class="n">authorStatus</span><span class="o">=</span><span class="p">[</span><span class="n">ALAssetsLibrary</span> <span class="nf">authorizationStatus</span><span class="p">];</span>
</code></pre></div> <h3 id="id-disablesharedphotostreamssupport">disableSharedPhotoStreamsSupport</h3> <p>关闭检索和通知共享照片流的信息，是一个类方法。支持IOS6.0及以后的系统。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">ALAssetsLibrary</span> <span class="nf">disableSharedPhotoStreamsSupport</span><span class="p">];</span>
</code></pre></div> <h3 id="id-section">初始化</h3> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">ALAssetsLibrary</span> <span class="o">*</span><span class="n">assetsLibrary</span><span class="o">=</span><span class="p">[[</span><span class="n">ALAssetsLibrary</span> <span class="nf">alloc</span><span class="p">]</span><span class="nf">init</span><span class="p">];</span>
</code></pre></div> <h3 id="id-alassetalassetsgroup">获取ALAsset和ALAssetsGroup</h3> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//通过URL地址获取在相册中ALAsset，该方法是异步的
</span><span class="p">[</span><span class="n">assetsLibrary</span> <span class="nf">assetForURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@""</span><span class="p">]</span> <span class="nf">resultBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">ALAsset</span> <span class="o">*</span><span class="n">asset</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//成功返回ALAsset
</span>    <span class="p">}</span> <span class="nf">failureBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//获取失败
</span>    <span class="p">}];</span>
<span class="c1">//通过URL地址获取相册ALAssetsGroup，该方法是异步的
</span><span class="p">[</span><span class="n">assetsLibrary</span> <span class="nf">groupForURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@""</span><span class="p">]</span> <span class="nf">resultBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">ALAssetsGroup</span> <span class="o">*</span><span class="n">group</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//成功返回ALAssetsGroup
</span>    <span class="p">}</span> <span class="nf">failureBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//获取失败
</span>    <span class="p">}];</span>
</code></pre></div> <p>资源类型有：</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">enum</span> <span class="p">{</span>
    <span class="n">ALAssetsGroupLibrary</span>        <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>         <span class="c1">// The Library group that includes all assets.
</span>    <span class="n">ALAssetsGroupAlbum</span>          <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>         <span class="c1">// All the albums synced from iTunes or created on the device.
</span>    <span class="n">ALAssetsGroupEvent</span>          <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>         <span class="c1">// All the events synced from iTunes.
</span>    <span class="n">ALAssetsGroupFaces</span>          <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>         <span class="c1">// All the faces albums synced from iTunes.
</span>    <span class="n">ALAssetsGroupSavedPhotos</span>    <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>         <span class="c1">// The Saved Photos album.
</span><span class="cp">#if __IPHONE_5_0 &lt;= __IPHONE_OS_VERSION_MAX_ALLOWED
</span>    <span class="n">ALAssetsGroupPhotoStream</span>    <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>         <span class="c1">// The PhotoStream album.
</span><span class="cp">#endif
</span>    <span class="n">ALAssetsGroupAll</span>            <span class="o">=</span> <span class="mh">0xFFFFFFFF</span><span class="p">,</span>       <span class="c1">// The same as ORing together all the available group types,
</span><span class="p">};</span>
</code></pre></div> <h3 id="id-section-1">创建一个相册到资源相册中</h3> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//创建一个名为“test”的相册，该方法是异步的
</span><span class="p">[</span><span class="n">assetsLibrary</span> <span class="nf">addAssetsGroupAlbumWithName</span><span class="p">:</span><span class="s">@"test"</span> <span class="nf">resultBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">ALAssetsGroup</span> <span class="o">*</span><span class="n">group</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//创建成功后，返回group；如果已经存在了名为“test”的相册，则返回一个nil的group
</span>    <span class="p">}</span> <span class="nf">failureBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//创建失败，可能原因有：1、用户没有授权 2、创建的资源名，时不可获得的
</span><span class="p">}];</span>
</code></pre></div> <h3 id="id-section-2">保存照片或视频到系统默认相册中</h3> <h4 id="id-section-3">保存照片或视频到系统默认相册中</h4>
<pre><code class="language-obcj">[assetsLibrary writeImageDataToSavedPhotosAlbum:imageData metadata:nil completionBlock:^(NSURL *assetURL, NSError *error) {
       //保存后返回assetUrl；如果error等于nil，则保存成功
    }];
</code></pre>
<h4 id="id-cgimageref">保存图片到默认的相册中，以CGImageRef的形式</h4> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">assetsLibrary</span> <span class="nf">writeImageToSavedPhotosAlbum</span><span class="p">:</span><span class="n">cgImageRef</span> <span class="nf">metadata</span><span class="p">:</span><span class="nb">nil</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//保存后返回assetUrl；如果error等于nil，则保存成功
</span> <span class="p">}];</span>
</code></pre></div> <h4 id="id-cgimageref-1">保存图片到默认的相册中，以CGImageRef的形式，并选择旋转方向</h4> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">assetsLibrary</span> <span class="nf">writeImageToSavedPhotosAlbum</span><span class="p">:</span><span class="n">cgImageRef</span> <span class="nf">orientation</span><span class="p">:</span><span class="n">ALAssetOrientationDown</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//保存后返回assetUrl如果error等于nil，则保存成功
</span> <span class="p">}];</span>
<span class="c1">//旋转方向
</span><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">ALAssetOrientation</span><span class="p">)</span> <span class="p">{</span>
 <span class="n">ALAssetOrientationUp</span><span class="p">,</span>             <span class="c1">//方向向上 默认
</span> <span class="n">ALAssetOrientationDown</span><span class="p">,</span>           <span class="c1">// 方向向下
</span> <span class="n">ALAssetOrientationLeft</span><span class="p">,</span>           <span class="c1">// 方向向左
</span> <span class="n">ALAssetOrientationRight</span><span class="p">,</span>          <span class="c1">// 方向向右
</span> <span class="n">ALAssetOrientationUpMirrored</span><span class="p">,</span>     <span class="c1">// 图像沿水平方向，向上翻转
</span> <span class="n">ALAssetOrientationDownMirrored</span><span class="p">,</span>   <span class="c1">// 图像沿水平方向，向下翻转
</span> <span class="n">ALAssetOrientationLeftMirrored</span><span class="p">,</span>   <span class="c1">// 图像沿垂直方向，向左翻转
</span> <span class="n">ALAssetOrientationRightMirrored</span><span class="p">,</span>  <span class="c1">// 图像沿垂直方向，向右翻转
</span><span class="p">};</span>
</code></pre></div> <h4 id="id-section-4">保存视频到默认的相册中</h4> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//在保存视频之前，先验证一下该视频文件是否与该相册资源相匹配
</span><span class="k">if</span> <span class="p">([</span><span class="n">assetsLibrary</span> <span class="nf">videoAtPathIsCompatibleWithSavedPhotosAlbum</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">fileURLWithPath</span><span class="p">:</span><span class="n">videoPath</span><span class="p">]])</span> <span class="p">{</span>
    <span class="c1">//保存视频到默认相册中
</span>    <span class="p">[</span><span class="n">assetsLibrary</span> <span class="nf">writeVideoAtPathToSavedPhotosAlbum</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">fileURLWithPath</span><span class="p">:</span><span class="n">videoPaht</span><span class="p">]</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//保存后返回视频资源的url；如果error等于nil，则保存成功
</span> <span class="p">}];</span> <span class="p">}</span>
</code></pre></div> <h2 id="id-alassetsgroup">ALAssetsGroup</h2> <p>ALAssetsGroup代表资源库中的每一个资源集合。即每一个ALAssetsGroup就是用户在“照片”应用程序中所看到的相册集合。</p> <h3 id="id-editable">属性editable</h3> <p>editable，是一个只读属性。如果返回值为YES，表示该资源集合可以编辑，反之，则不可以编辑。支持IOS5.0及以后的系统。</p> <h3 id="id-addasset"><code class="highlighter-rouge">addAsset：</code></h3> <p>添加已存在的资源(ALAsset)到该集合中，在添加之前应该先判断，该资源集合是否允许编辑啊。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span><span class="p">.</span><span class="n">editable</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span> <span class="nf">addAsset</span><span class="p">:</span><span class="n">asset</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源添加成功！"</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源添加失败"</span><span class="p">);</span><span class="c1">//除了该资源集合不允许编辑导致添加失败以外，还有可能就是该资源本身不允许添加到该资源集合中
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> <h3 id="id-valueforproperty"><code class="highlighter-rouge">valueForProperty：</code></h3> <p>返回该资源集合的属性值，支持IOS4.0及以后</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源集合相册的名称：%@"</span><span class="p">,[</span><span class="n">assetsGroup</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetsGroupPropertyName</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源集合相册的类型：%@"</span><span class="p">,[</span><span class="n">assetsGroup</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetsGroupPropertyType</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源集合相册的存储ID：%@"</span><span class="p">,[</span><span class="n">assetsGroup</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetsGroupPropertyPersistentID</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源集合相册的存储地址URL：%@"</span><span class="p">,[</span><span class="n">assetsGroup</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetsGroupPropertyURL</span><span class="p">]);</span>
</code></pre></div> <h3 id="id-setassetsfilter"><code class="highlighter-rouge">setAssetsFilter:</code></h3> <p>用于筛选资源集合，其参数为ALAssetsFilter。同一时间，只能有一个筛选条件有效。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">assetsGroup</span> <span class="nf">setAssetsFilter</span><span class="p">:[</span><span class="n">ALAssetsFilter</span> <span class="nf">allPhotos</span><span class="p">]];</span>
</code></pre></div> <p>ALAssetsFilter用于资源集合的筛选条件，它只有3个类方法：</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">ALAssetsFilter</span> <span class="nf">allPhotos</span><span class="p">];</span> <span class="c1">//在资源集合中获取图片
</span><span class="p">[</span><span class="n">ALAssetsFilter</span> <span class="nf">allVideos</span><span class="p">];</span> <span class="c1">//在资源集合中获取视频
</span><span class="p">[</span><span class="n">ALAssetsFilter</span> <span class="nf">allAssets</span><span class="p">];</span> <span class="c1">//获取所有资源
</span></code></pre></div> <h3 id="id-posterimagenumberofassets">posterImage、numberOfAssets</h3> <p>posterImage获取的是该资源集合及相册的封面，返回值为CGImageRef。numberOfAssets获取的是该资源集合过滤后的的资源数量，如果没有过滤则获取的是所有的资源数量。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//获取封面图片
</span><span class="n">CGImageRef</span> <span class="n">imageRef</span><span class="o">=</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span> <span class="nf">posterImage</span><span class="p">];</span>
<span class="n">UIImage</span> <span class="o">*</span><span class="n">posterImage</span><span class="o">=</span><span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithCGImage</span><span class="p">:</span><span class="n">imageRef</span><span class="p">];</span>
<span class="c1">//获取资源数量
</span><span class="n">NSInteger</span> <span class="o">*</span><span class="n">assetCount</span><span class="o">=</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span> <span class="nf">numberOfAssets</span><span class="p">];</span>
</code></pre></div> <h3 id="id-section-5">遍历资源数组</h3> <p>遍历资源数组获取资源，ALAssetsGroup提供了3中方法：1、普通的遍历，2、指定操作方式遍历，3、指定操作方式及指定索引集遍历资源。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//enumerateAssets都是同步的，所以我放在了一个线程中执行遍历
</span><span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">arrayAsset</span><span class="o">=</span><span class="p">[[</span><span class="n">NSMutableArray</span> <span class="nf">alloc</span><span class="p">]</span><span class="nf">init</span><span class="p">];</span>
<span class="c1">// 获取全局调度队列,后面的标记永远是0
</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="c1">// 创建调度群组
</span><span class="n">dispatch_group_t</span> <span class="n">group</span> <span class="o">=</span> <span class="n">dispatch_group_create</span><span class="p">();</span>
<span class="c1">// 向调度群组添加异步任务，并指定执行的队列
</span><span class="n">dispatch_group_async</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">queue</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span> <span class="nf">enumerateAssetsUsingBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">ALAsset</span> <span class="o">*</span><span class="n">result</span><span class="p">,</span> <span class="n">NSUInteger</span> <span class="n">index</span><span class="p">,</span> <span class="n">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//result不为nil则存在资源，继续遍历；为nil则不存在资源，结束遍历
</span>        <span class="c1">//index为该资源在资源集合中的索引
</span>        <span class="c1">//stop为一个指针，当给其赋值YES时，停止遍历
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">[</span><span class="n">arrayAsset</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">result</span><span class="p">]</span><span class="err">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
                <span class="n">NSLog</span><span class="p">(</span><span class="s">@"回到主线程"</span><span class="p">)</span><span class="err">;</span>
            <span class="p">})</span><span class="err">;</span>
        <span class="p">}</span>
    <span class="p">}];</span>
<span class="p">});</span>
<span class="c1">//指定操作方式的，遍历。操作方式有：
//NSEnumerationConcurrent：同步的方式遍历
//NSEnumerationReverse：倒序的方式遍历
</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span> <span class="nf">enumerateAssetsWithOptions</span><span class="p">:</span><span class="n">NSEnumerationReverse</span> <span class="nf">usingBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">ALAsset</span> <span class="o">*</span><span class="n">result</span><span class="p">,</span> <span class="n">NSUInteger</span> <span class="n">index</span><span class="p">,</span> <span class="n">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//同上
</span><span class="p">}];</span>
<span class="n">NSMutableIndexSet</span> <span class="o">*</span><span class="n">indexes</span><span class="o">=</span><span class="p">[</span><span class="n">NSMutableIndexSet</span> <span class="nf">indexSetWithIndex</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
<span class="p">[</span><span class="n">indexes</span> <span class="nf">addIndex</span><span class="p">:</span><span class="mi">2</span><span class="p">];</span>
<span class="c1">//同上一个操作方式
//Indexes是一个索引集合，ALAssetsGroup将会取出在该索引集合中的资源
</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">assetsGroup</span> <span class="nf">enumerateAssetsAtIndexes</span><span class="p">:</span><span class="n">indexes</span> <span class="nf">options</span><span class="p">:</span><span class="n">NSEnumerationReverse</span> <span class="nf">usingBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">ALAsset</span> <span class="o">*</span><span class="n">result</span><span class="p">,</span> <span class="n">NSUInteger</span> <span class="n">index</span><span class="p">,</span> <span class="n">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//同上
</span><span class="p">}];</span>
</code></pre></div> <h2 id="id-alasset">ALAsset</h2> <p>ALAsset代表相册中的每一个资源，可以通过ALAsset获取该资源的信息，也可以修改资源文件。</p> <h3 id="id-valueforproperty-1"><code class="highlighter-rouge">valueForProperty:</code></h3> <p>返回该资源集合的属性值，支持IOS4.0及以后。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//valueForProperty的属性值无效将返回：ALErrorInvalidProperty
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源类别：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyType</span><span class="p">]);</span><span class="c1">//有三种资源类别：ALAssetTypePhoto(图片), ALAssetTypeVideo(视频),ALAssetTypeUnknown(未知)
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源拍摄地点：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyLocation</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"视频持续时间：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyDuration</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源方向：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyOrientation</span><span class="p">]);</span><span class="c1">//值为枚举类型：ALAssetOrientation
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源创建时间：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyDate</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源UTI数组：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyRepresentations</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源URL：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyAssetURL</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源key-value集合：%@"</span><span class="p">,[</span><span class="n">asset</span> <span class="nf">valueForProperty</span><span class="p">:</span><span class="n">ALAssetPropertyURLs</span><span class="p">]);</span><span class="c1">//key:为uti；value:为url
</span></code></pre></div> <h3 id="id-defaultrepresentationrepresentationforuti">defaultRepresentation与representationForUTI</h3> <p>defaultRepresentation返回的是默认的资源详细信息类(ALAssetRepresentation)，representationForUTI则是通过UTI值来获取资源信息类。关于ALAssetRepresentation下面将会介绍到。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">ALAssetRepresentation</span> <span class="o">*</span><span class="n">rep</span><span class="o">=</span><span class="p">[</span><span class="n">asset</span> <span class="nf">defaultRepresentation</span><span class="p">];</span>
<span class="n">ALAssetRepresentation</span> <span class="o">*</span><span class="n">rep</span><span class="o">=</span><span class="p">[</span><span class="n">asset</span> <span class="nf">representationForUTI</span><span class="p">:</span><span class="s">@"public.jpeg"</span><span class="p">];</span>
</code></pre></div> <h3 id="id-thumbnailaspectratiothumbnail">thumbnail与aspectRatioThumbnail</h3> <p>thumbnail是以正方形截取的一个缩略图，aspectRatioThumbnail则是一个等比例缩略图。它们都是适合该系统的且方向都没有问题。返回值为CGImageRef。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">UIImage</span> <span class="o">*</span><span class="n">thumbnail</span><span class="o">=</span><span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithCGImage</span><span class="p">:[</span><span class="n">asset</span> <span class="nf">thumbnail</span><span class="p">]];</span>
<span class="n">UIImage</span> <span class="o">*</span><span class="n">aspectThumbnail</span><span class="o">=</span><span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithCGImage</span><span class="p">:[</span><span class="n">asset</span> <span class="nf">aspectRatioThumbnail</span><span class="p">]];</span>
</code></pre></div> <h3 id="id-editableoriginalasset">editable与originalAsset</h3> <p>editable，是一个只读属性。如果返回值为YES，表示该资源可以编辑，反之，则不可以编辑。应用仅允许编辑最开始写入的资源。originalAsset ，如果另存了一个修改后的资源，则返回一个资源，否则返回nil。 支持IOS5.0及以后的系统。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">BOOL</span> <span class="n">editAble</span><span class="o">=</span><span class="n">asset</span><span class="p">.</span><span class="n">editable</span><span class="p">;</span>
<span class="n">ALAsset</span> <span class="o">*</span><span class="n">originalAset</span><span class="o">=</span><span class="n">asset</span><span class="p">.</span><span class="n">originalAsset</span><span class="p">;</span>
</code></pre></div> <h3 id="id-setimagedatametadatacompletionblocksetvideoatpathcompletionblock">
<code class="highlighter-rouge">setImageData:metadata:completionBlock</code>与<code class="highlighter-rouge">setVideoAtPath:completionBlock:</code>
</h3> <p>setImageData:metadata:completionBlock:用于替换掉原来的资源图片为给定的图片，setVideoAtPath:completionBlock:用于替换掉原来的资源视频为给定的视频。两者在使用之前，应该要先检查属性editable。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//在替换愿资源图片时，应该先要检查该资源是否可以编辑
</span><span class="k">if</span> <span class="p">(</span><span class="n">asset</span><span class="p">.</span><span class="n">editable</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">asset</span> <span class="nf">setImageData</span><span class="p">:</span><span class="n">imageData</span> <span class="nf">metadata</span><span class="p">:</span><span class="nb">nil</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">//如果替换成功，则返回一个资源的url，否则，assetURL为nil
</span>    <span class="p">}];</span>
<span class="p">}</span>
<span class="c1">//在替换愿资源视频时，应该先要检查该资源是否可以编辑
</span><span class="k">if</span> <span class="p">(</span><span class="n">asset</span><span class="p">.</span><span class="n">editable</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">asset</span> <span class="nf">setVideoAtPath</span><span class="p">:</span><span class="n">videoUrl</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">//如果替换成功，则返回一个资源的url，否则，assetURL为nil
</span>    <span class="p">}];</span>
<span class="p">}</span>
</code></pre></div> <h3 id="id-section-6">保存资源的默认相册中</h3> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">//保存一个新的图片资源，重新生成一个图片
</span><span class="p">[</span><span class="n">asset</span> <span class="nf">writeModifiedImageDataToSavedPhotosAlbum</span><span class="p">:</span><span class="n">imageData</span> <span class="nf">metadata</span><span class="p">:</span><span class="nb">nil</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//成功后，返回一个新的图片URL
</span><span class="p">}];</span>
<span class="c1">//保存一个新的视频资源，重新生成一个视频
</span><span class="p">[</span><span class="n">asset</span> <span class="nf">writeModifiedVideoAtPathToSavedPhotosAlbum</span><span class="p">:</span><span class="n">videoUrl</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">assetURL</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//成功后，返回一个新的图片URL
</span><span class="p">}];</span>
</code></pre></div> <h2 id="id-alassetrepresentation">ALAssetRepresentation</h2> <p>ALAssetRepresentation代表资每一个资源文件的详细信息。获取ALAssetRepresentation的一种方式如下：</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">ALAssetRepresentation</span> <span class="o">*</span><span class="n">representation</span><span class="o">=</span><span class="p">[</span><span class="n">asset</span> <span class="nf">defaultRepresentation</span><span class="p">];</span>
</code></pre></div> <h3 id="id-section-7">基本属性介绍</h3> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源文件的UTI：%@"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">UTI</span><span class="p">]);</span> <span class="c1">//唯一标识符
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源图片宽高：%@"</span><span class="p">,</span><span class="n">NSStringFromCGSize</span><span class="p">([</span><span class="n">representation</span> <span class="nf">dimensions</span><span class="p">]));</span> <span class="c1">//不存在则返回CGSizeZero
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源文件容量大小：%lld"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">size</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源文件的URL：%@"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">url</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源文件的旋转方向：%d"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">orientation</span><span class="p">]);</span> <span class="c1">//值为上面介绍的方向枚举类型中的一个
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源图片的缩放比例：%f"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">scale</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源文件的名称：%@"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">filename</span><span class="p">]);</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"资源文件的元数据：%@"</span><span class="p">,[</span><span class="n">representation</span> <span class="nf">metadata</span><span class="p">]);</span> <span class="c1">//返回一个字典，如果不存在则返回nil
</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">resolutionImage</span><span class="o">=</span><span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithCGImage</span><span class="p">:[</span><span class="n">representation</span> <span class="nf">fullResolutionImage</span><span class="p">]];</span> <span class="c1">//资源图片高清图，不存在则返回NULL
</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">fullScreenImage</span><span class="o">=</span><span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithCGImage</span><span class="p">:[</span><span class="n">representation</span> <span class="nf">fullScreenImage</span><span class="p">]];</span>     <span class="c1">//资源图片的全屏图，不存在则返回NULL
</span></code></pre></div> <h3 id="id-getbytesfromoffsetlengtherror"><code class="highlighter-rouge">getBytes:fromOffset:length:error:</code></h3> <p>该方法可以把资源指定的部分，写入缓冲区即内存中保存，返回保存成功后的文件大小。注意：用该方法，文件太大容易是程序的查处内存上限，程序容易闪退。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">Byte</span> <span class="o">*</span><span class="n">fileBuffer</span> <span class="o">=</span> <span class="p">(</span><span class="n">Byte</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">((</span><span class="kt">long</span><span class="p">)</span><span class="n">representation</span><span class="p">.</span><span class="n">size</span><span class="p">);</span> <span class="c1">//开辟内存空间，最为缓冲区
</span><span class="n">NSUInteger</span> <span class="n">bufferSize</span> <span class="o">=</span> <span class="p">[</span><span class="n">representation</span> <span class="nf">getBytes</span><span class="p">:</span><span class="n">fileBuffer</span> <span class="nf">fromOffset</span><span class="p">:</span><span class="mi">0</span> <span class="nf">length</span><span class="p">:(</span><span class="kt">long</span><span class="p">)</span><span class="n">representation</span><span class="p">.</span><span class="n">size</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span> <span class="c1">//把资源文件写入缓冲区
</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSData</span> <span class="nf">dataWithBytesNoCopy</span><span class="p">:</span><span class="n">fileBuffer</span> <span class="nf">length</span><span class="p">:</span><span class="n">bufferSize</span> <span class="nf">freeWhenDone</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span><span class="c1">//把该缓冲区的文件指向NSData
</span></code></pre></div> <h3 id="id-cgimagewithoptions"><code class="highlighter-rouge">CGImageWithOptions:</code></h3> <p>该方法，我没有用过，不是很熟，大概用法是：定义一个获取方式字典options，调用该方法返回CGImageRef的图片。哪位大神知道的还请指教。</p> <div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="cp">#import &lt;ImageIO/ImageIO.h&gt;
</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSDictionary</span> <span class="nf">dictionaryWithObjectsAndKeys</span><span class="p">:</span>
            <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">kCFBooleanTrue</span><span class="p">,</span> <span class="n">kCGImageSourceCreateThumbnailWithTransform</span><span class="p">,</span>
            <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">kCFBooleanTrue</span><span class="p">,</span> <span class="n">kCGImageSourceCreateThumbnailFromImageAlways</span><span class="p">,</span>
            <span class="p">(</span><span class="n">id</span><span class="p">)[</span><span class="n">NSNumber</span> <span class="nf">numberWithFloat</span><span class="p">:</span><span class="mi">200</span><span class="p">],</span> <span class="n">kCGImageSourceThumbnailMaxPixelSize</span><span class="p">,</span>
            <span class="nb">nil</span><span class="p">];</span>
<span class="n">CGImageRef</span> <span class="n">optionsThumbnail</span> <span class="o">=</span> <span class="p">[</span><span class="n">representation</span> <span class="nf">CGImageWithOptions</span><span class="p">:</span><span class="n">options</span><span class="p">];</span>
<span class="n">UIImage</span> <span class="o">*</span><span class="n">thumbnailImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithCGImage</span><span class="p">:</span><span class="n">optionsThumbnail</span><span class="p">];</span>
</code></pre></div> <p>AssetsLibrary框架介绍到此结束。有不对的地方，请各位大神指正，谢谢！</p> <p>ps:据此写的一个媒体（图片／视频）浏览起框架：<a href="https://github.com/myzerone/XJAssetsPicker" target="_blank">点击打开链接</a></p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="/tags/#iOS" title="Pages tagged iOS" class="tag"><span class="term">iOS</span></a><a href="/tags/#AssetsLibrary" title="Pages tagged AssetsLibrary" class="tag"><span class="term">AssetsLibrary</span></a><a href="/tags/#%E5%9B%BE%E7%89%87" title="Pages tagged 图片" class="tag"><span class="term">图片</span></a><a href="/tags/#%E8%A7%86%E9%A2%91" title="Pages tagged 视频" class="tag"><span class="term">视频</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=/posts/2014/03/25/iOS-AssetsLibrary%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=/posts/2014/03/25/iOS-AssetsLibrary%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=/posts/2014/03/25/iOS-AssetsLibrary%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <!-- /#commentit_thread 评论UI --> <section id="commentit_thread" class="animated fadeInUp"></section> </header> <!-- JS --> <script src="/assets/js/jquery-1.12.0.min.js"></script> <script src="/assets/js/jquery.dlmenu.min.js"></script> <script src="/assets/js/jquery.goup.min.js"></script> <script src="/assets/js/jquery.magnific-popup.min.js"></script> <script src="/assets/js/jquery.fitvid.min.js"></script> <script src="/assets/js/scripts.js"></script> <!-- Asynchronous Google Analytics snippet --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-83690324-2', 'auto'); ga('require', 'linkid', 'linkid.js'); ga('send', 'pageview'); </script> <!-- Comm(ent|it)评论加载 https://commentit.io/ --> <!-- 历史评论列表 --> <!-- There are no comments on this post. --> <!-- 发表评论 --> <noscript>Please enable JavaScript to view the comment form powered by <a href="https://commentit.io/">Comm(ent|it)</a>
</noscript> <div id="commentit"></div> <script type="text/javascript"> /** CONFIGURATION VARIABLES **/ var commentitUsername = 'myzerone'; var commentitRepo = 'myzerone/myzerone.github.io'; var commentitId = '/posts/2014/03/25/iOS AssetsLibrary框架的使用'; /** DON'T EDIT FOLLOWING LINES **/ (function() { if (!document.getElementById('commentit_thread')) { return; }　 var commentit = document.createElement('script'); commentit.type = 'text/javascript'; commentit.async = true; commentit.src = 'https://commentit.io/static/embed/dist/commentit.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(commentit); document.getElementById('commentit_thread').appendChild(document.getElementById('commentit')); })(); </script> </body> </html>
